<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ShinkeerMall</title>
    <!-- Bootstrap Styles-->
    <link href="../static/assets/css/bootstrap.css" rel="stylesheet"/>
    <!-- icon库-->
    <link href="../static/assets/css/font-awesome.css" rel="stylesheet"/>
    <!-- JS Scripts-->
    <link href="../static/assets/css/custom-styles.css" rel="stylesheet"/>
    <!-- jQuery Js -->
    <script src="../static/assets/js/jquery-1.10.2.js"></script>
    <!-- Bootstrap Js -->
    <script src="../static/assets/js/bootstrap.min.js"></script>

    <!-- Metis Menu Js -->
    <script src="../static/assets/js/jquery.metisMenu.js"></script>

    <script src="../static/assets/js/Lightweight-Chart/jquery.chart.js"></script>

    <!-- Custom Js -->
    <script src="../static/assets/js/custom-scripts.js"></script>
<body>
<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
            <!--logo-->
            <a class="navbar-brand" href="/"><strong>Shinkeer</strong></a>
            <!--菜单隐藏-->
            <div id="sideNav" href=""><i class="fa fa-caret-right"></i></div>
        </div>

        <!--头部信息图标-->
        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-messages">
                    <li>
                        <a href="#">
                            <div>
                                <strong>李四</strong>
                                <span class="pull-right text-muted">
                                        <em>2018-5-15 12:00:00</em>
                                    </span>
                            </div>
                            <div>王总你好！供应商记录已经收齐啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <strong>王五</strong>
                                <span class="pull-right text-muted">
                                        <em>2018-5-14 12:00:00</em>
                                    </span>
                            </div>
                            <div>王总你好！报价信息已出请注意查收啦啦啦啦啦啦啊啦啦啦啦啦啦啦啦啦...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <strong>赵总</strong>
                                <span class="pull-right text-muted">
                                        <em>2018-5-14 12:00:00</em>
                                    </span>
                            </div>
                            <div>王总你好！最新一批物料已经到期啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦啦...</div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>查看更多</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-messages -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-tasks fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 1</strong>
                                    <span class="pull-right text-muted">60% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (success)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 2</strong>
                                    <span class="pull-right text-muted">28% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="28"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 28%">
                                        <span class="sr-only">28% Complete</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 3</strong>
                                    <span class="pull-right text-muted">60% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (warning)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <p>
                                    <strong>Task 4</strong>
                                    <span class="pull-right text-muted">85% Complete</span>
                                </p>
                                <div class="progress progress-striped active">
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="85"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 85%">
                                        <span class="sr-only">85% Complete (danger)</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>See All Tasks</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-tasks -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-bell fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-comment fa-fw"></i> New Comment
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                <span class="pull-right text-muted small">12 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-envelope fa-fw"></i> Message Sent
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-tasks fa-fw"></i> New Task
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a href="#">
                            <div>
                                <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                <span class="pull-right text-muted small">4 min</span>
                            </div>
                        </a>
                    </li>
                    <li class="divider"></li>
                    <li>
                        <a class="text-center" href="#">
                            <strong>See All Alerts</strong>
                            <i class="fa fa-angle-right"></i>
                        </a>
                    </li>
                </ul>
                <!-- /.dropdown-alerts -->
            </li>
            <!-- /.dropdown -->
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="#"><i class="fa fa-user fa-fw"></i> 个人中心</a>
                    </li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> 修改资料</a>
                    </li>
                    <li class="divider"></li>
                    <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> 退出当前账号</a>
                    </li>
                </ul>
                <!-- /.dropdown-user -->
            </li>
            <!-- /.dropdown -->
        </ul>
    </nav>
</div>
<!--/. NAV TOP  -->
<nav class="navbar-default navbar-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav" id="main-menu">
            <li>
                <a href="#" class="active-menu" onclick="addTab('联系人管理','/users','111')">联系人管理</a>
            </li>
            <li>
                <a href="#"  onclick="addTab('产品管理','/merchandise','222')">产品管理</a>
            </li>
            <li>
                <a href="#"> 产品信息<span class="fa arrow"></span></a>
                <ul class="nav nav-second-level">
                    <li>
                        <a href="#" onclick="addTab('产品列表','/text','333')">产品列表</a>
                    </li>
                    <li>
                        <a href="#" onclick="addTab('产品详情','/text','444')">产品详情</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#" onclick="addTab('供应商自助','/text','555')"> 供应商自助</a>
            </li>
        </ul>

    </div>
</nav>
<!--导航内容-->
<div id="page-wrapper">
    <div class="header">
        <div class="scoll-left"><img src="../static/assets/img/left.png"></div>
        <div class="scoll-right"><img src="../static/assets/img/right.png"></div>
        <div class="ul-div-style">
            <ul class="nav" id="mytab" style="position: relative;">
            </ul>
        </div>
    </div>
    <div id="page-inner">
        <div class="row tab-content">
        </div>
    </div>
    <!-- /. PAGE INNER  -->
</div>
<!-- /. WRAPPER  -->


<script>
    //选中样式
    $("#main-menu a").click(function(){
        $("#main-menu a").each(function(){
            $(this).removeClass("active-menu");
        })
        $(this).addClass("active-menu");
    })
    //新增标签页
    function addTab(tabName, url, id) {
        var idtm = $('#mytab>li');
        var fag = "inexist";
        for (var i = 0; i < idtm.length; i++) {
            var liDataId = $(idtm[i]).attr('data-tm');
            if (id == liDataId) {
                fag = "exist";
            }
        }
        if (fag == "inexist") {
            $(".tab-content").append("<div class='tab-pane fade' id='" + id + "'/>");
            $("#mytab").append("<li data-tm='" + id + "'><a href='#" + id + "'>" + tabName + "<span class='tabs-close'><img src='../static/assets/img/1162328.png' ></span></a></li>");
        }
        loadDivData(id, url);

        //新增标签页时查看是否超出父元素固定宽度，超出则显示左右键
        //获取最后一个li在父元素中的left位置
        var lastLi_left = $('#mytab li:last-child').position().left;
        //获取最后一个li在父元素中的宽度
        var lastLi_width = $('#mytab li:last-child').width();
        if((parseInt(lastLi_left)+parseInt(lastLi_width))>1030){
            $(".scoll-left").show();
            $(".scoll-right").show();
            $(".ul-div-style").css("margin-left","30px");
            $(".ul-div-style").css("margin-right","30px");
        }
        checkLiShow();
    }

    function loadDivData(tabsId, url) {
        $("a[href='#" + tabsId + "']").tab('show');
        var $tabContent = $('#' + tabsId);
        if ($tabContent.length < 100) {
            $tabContent.load(url);
        }
    }
    //切换标签页
    $(document).on('click', '#mytab a', function (e) {
        e.preventDefault();
        $(this).tab('show');
    })
    //删除并切换标签
    $(document).on('click', '.tabs-close', function (e) {
        var pli = $(this).parent().parent('li');
        var nextPli = $(pli).next('li');//右边那个li
        var prevPli = $(pli).prev('li');
        var id = $(pli).attr("data-tm");
        $("#" + id).remove();
        pli.remove();
        if (nextPli.length > 0) {
            $(nextPli).find('a').tab('show');
        } else if (prevPli.length > 0) {
            $(prevPli).find('a').tab('show');
        }
        //总li的长度小于1030时，全屏显示
        //获取最后一个li在父元素中的left位置
        var lastLi_left = $('#mytab li:last-child').position().left;
        //获取最后一个li在父元素中的宽度
        var lastLi_width = $('#mytab li:last-child').width();
        if((parseInt(lastLi_left)+parseInt(lastLi_width))<1030){
            $(".ul-div-style").scrollLeft(0);
            $(".scoll-left").hide();
            $(".scoll-right").hide();
            $(".ul-div-style").css("margin-left","0px");
            $(".ul-div-style").css("margin-right","0px");
        }
    })
    $(window).load(function () {
        //初始化内容页
        addTab('联系人管理','/users','111');

        //绑定向左按钮
        var left = 0;
        $(".scoll-left").click(function () {
            if(left<=0){
                return;
            }
            left -= 100;
            $(".ul-div-style").scrollLeft(left);
        })

        //绑定向右按钮
        $(".scoll-right").click(function () {
            if(left<0){
                left = 0;
            }
            //获取最后一个li在父元素中的left位置
            var lastLi_left = $('#mytab li:last-child').position().left;
            //获取最后一个li在父元素中的宽度
            var lastLi_width = $('#mytab li:last-child').width();
            //如果已经到了最后一个li的left位置了，就不可以移动了
            if((parseInt(left)+100)>(parseInt(lastLi_left)-1030)){
                left = parseInt(lastLi_left)+parseInt(lastLi_width)-1030;
            }else{
                left += 100;
            }
            $(".ul-div-style").scrollLeft(left);
        })
    });

    //判断选中的li是否在屏幕显示内
    function checkLiShow(){
        var act_left = $(".ul-div-style").scrollLeft();
        console.log("一开始："+act_left);
        //被选中的li 偏移量
        var activeLi_left = $('#mytab li.active').position().left;
        var activeLi_width = $('#mytab li.active').width();
        if(parseInt(activeLi_left)+parseInt(activeLi_width)>1030+parseInt(act_left)){
            console.log("大于的情况：activeLi_left+activeLi_width"+(parseInt(activeLi_left)+parseInt(activeLi_width)));
            console.log("大于的情况：1030+act_left"+(1030+parseInt(act_left)));

            act_left = parseInt(activeLi_left)+parseInt(activeLi_width)-1030;
            console.log("大于的情况："+act_left);
        }else if(parseInt(activeLi_left)<parseInt(act_left)){
            console.log("小于：activeLi_left"+(parseInt(activeLi_left)));
            console.log("小于：act_left"+(parseInt(act_left)));
            act_left = parseInt(activeLi_left);
            console.log("后面一次的小于：act_left"+act_left);
        }
        console.log("最后最后的act_left"+act_left)
        $(".ul-div-style").scrollLeft(act_left);
    }

</script>

</body>

</html>